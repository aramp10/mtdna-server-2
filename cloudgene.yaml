id: nf-mitocalling
name: mtDNA Variant Analysis
description: mtdna-Server2
version: v2.0.0-beta1
website: https://mitoverse.readthedocs.io/
category:

workflow:
  steps:
    - name: mtDNA Variant Analysis
      type: nextflow
      script: main.nf
      # params without UI
      params:
        project: "${CLOUDGENE_JOB_NAME}"
        user:
          email: "${CLOUDGENE_USER_EMAIL}"
          name: "${CLOUDGENE_USER_NAME}"
        service:
          name: "${CLOUDGENE_SERVICE_NAME}"
          email: "${CLOUDGENE_CONTACT_EMAIL}"
          url: "${CLOUDGENE_SERVICE_URL}"
      processes:
        - process: "MITOCALLING:CALCULATE_STATISTICS"
          label: "Calculate Sample Statistics"
          view: progressbar
        - process: "MITOCALLING:INPUT_VALIDATION"
          label: "Input Validation"
          view: progressbar
        - process: "MITOCALLING:QUALITY_CONTROL"
          label: "Quality Control Report"
          view: progressbar          
        - process: "MITOCALLING:MUTSERVE"
          label: "Variant Calling (mutserve)"
          view: progressbar
        - process: "MITOCALLING:MUTECT2"
          label: "Variant Calling (Mutect2)"
          view: progressbar  
        - process: "MITOCALLING:ANNOTATE"
          label: "Annotation"
          view: progressbar
        - process: "MITOCALLING:HAPLOGROUP_DETECTION"
          label: "Haplogroup Detection"
          view: progressbar
        - process: "MITOCALLING:CONTAMINATION_DETECTION"
          label: "Contamination Detection"
          view: progressbar
        - process: "MITOCALLING:REPORT"
          label: "Report Generation"
          view: progressbar
  inputs:

    - id: files
      description: Input Files
      type: local-folder
      pattern: "*.bam"

    - id: reference
      description: Reference
      type: list
      value: "rcrs"
      values:
        "rcrs": "rCRS"

    - id: detection_limit
      description: Detection Limit
      type: list
      value: 0.01
      values:
        0.01: 0.01
        0.05: 0.05
        0.1: 0.1      

    - id: mode
      description: Mode
      type: list
      value: mutserve
      values:
        mutserve: SNPs only (mutserve)
        mutect2: SNPs + Indel Calling (Mutect2)

  outputs:
    - id: output
      description: Output
      type: local-folder
      download: true
      temp: false
